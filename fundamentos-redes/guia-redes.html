<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centro de Mando de Redes v2.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f4; /* stone-100 */
            color: #1c1917; /* stone-900 */
        }
        .font-mono { font-family: 'Roboto Mono', monospace; }
        .nav-link { transition: color 0.3s, border-bottom-color 0.3s; }
        .nav-link:hover, .nav-link.active { color: #0d9488; border-bottom-color: #0d9488; }
        .layer { cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .layer:hover { transform: translateY(-5px); box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .strategic-insight {
            border-left: 4px solid #0d9488; /* teal-600 */
            background-color: #f0fdfa; /* teal-50 */
        }
        .lab-option { transition: background-color 0.3s, border-color 0.3s, color 0.3s; cursor: pointer; }
        .lab-option.correct { background-color: #10b981 !important; border-color: #059669 !important; color: white !important; transform: scale(1.05); }
        .lab-option.incorrect { background-color: #ef4444 !important; border-color: #dc2626 !important; color: white !important; }
        .feedback-box { transition: opacity 0.5s; }
        .packet-part {
            opacity: 0;
            transform: translateX(-20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-stone-100 shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold text-teal-700">Centro de Mando de Redes</h1>
            <div class="hidden md:flex space-x-6 text-sm font-semibold">
                <a href="#briefing" class="nav-link text-stone-600 border-b-2 border-transparent pb-1">Briefing</a>
                <a href="#anatomia" class="nav-link text-stone-600 border-b-2 border-transparent pb-1">Anatomía</a>
                <a href="#performance" class="nav-link text-stone-600 border-b-2 border-transparent pb-1">Performance</a>
                <a href="#protocolos" class="nav-link text-stone-600 border-b-2 border-transparent pb-1">Protocolos</a>
                <a href="#laboratorio" class="nav-link font-bold text-yellow-600 border-b-2 border-transparent pb-1">LAB (PEC1)</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-stone-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden bg-white shadow-lg">
            <a href="#briefing" class="block py-3 px-6 text-sm text-stone-600 hover:bg-stone-200">Briefing</a>
            <a href="#anatomia" class="block py-3 px-6 text-sm text-stone-600 hover:bg-stone-200">Anatomía</a>
            <a href="#performance" class="block py-3 px-6 text-sm text-stone-600 hover:bg-stone-200">Performance</a>
            <a href="#protocolos" class="block py-3 px-6 text-sm text-stone-600 hover:bg-stone-200">Protocolos</a>
            <a href="#laboratorio" class="block py-3 px-6 text-sm font-bold text-yellow-600 hover:bg-stone-200">LAB (PEC1)</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">

        <section id="briefing" class="text-center mb-24">
            <h2 class="text-4xl font-bold text-stone-800 mb-4">Módulo de Operaciones de Red</h2>
            <p class="text-lg text-stone-600 max-w-3xl mx-auto">
                Las redes son el sistema circulatorio de los datos y el principal campo de batalla en ciberseguridad. Este centro de mando integra la inteligencia clave para convertirla en conocimiento accionable para la PEC1.
            </p>
        </section>

        <section id="anatomia" class="mb-24">
            <h2 class="text-3xl font-bold text-center text-stone-800 mb-12">Anatomía de Internet: El Extremo y el Núcleo</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                    <h3 class="font-bold text-2xl mb-4 text-sky-700">El Extremo de la Red (The Edge)</h3>
                    <p class="text-stone-600">Aquí es donde operamos. Está compuesto por:</p>
                    <ul class="list-disc list-inside mt-4 space-y-2 text-stone-700">
                        <li><strong>Hosts / End Systems:</strong> Dispositivos finales (PC, smartphone, servidor).</li>
                        <li><strong>Redes de Acceso:</strong> La tecnología que te conecta al primer router (DSL, Fibra/FTTH, WiFi, 5G).</li>
                    </ul>
                </div>
                <div class="bg-white p-8 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                    <h3 class="font-bold text-2xl mb-4 text-rose-700">El Núcleo de la Red (The Core)</h3>
                    <p class="text-stone-600">La malla de routers e ISPs que interconecta todo. Su función es mover paquetes.</p>
                     <ul class="list-disc list-inside mt-4 space-y-2 text-stone-700">
                        <li><strong>Conmutación de Paquetes:</strong> Los datos se dividen, viajan de forma independiente y se reensamblan en el destino.</li>
                        <li><strong>Red de Redes:</strong> Internet es una jerarquía de ISPs (Tier-1, regionales, etc.) interconectados.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="performance" class="mb-24">
             <div class="bg-white p-8 rounded-lg shadow-lg">
                <h2 class="text-3xl font-bold text-center text-stone-800 mb-2">Análisis de Performance de Red</h2>
                <p class="text-center text-stone-600 mb-10">El rendimiento depende del retardo total. Entender sus componentes es clave para el diagnóstico.</p>
                <h3 class="text-2xl font-bold text-center mb-6">Fórmula del Retardo Nodal</h3>
                <p class="text-center text-stone-500 text-lg font-mono mb-10 bg-stone-50 p-3 rounded-md">d_nodal = d_proc + d_queue + d_trans + d_prop</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Cards de Delay -->
                </div>
                 <div class="strategic-insight p-6 rounded-lg mt-10">
                   <h4 class="font-bold text-xl text-teal-800 font-mono">&gt; Insight de Analista: Throughput vs. Ancho de Banda</h4>
                   <p class="text-stone-700 mt-2">El <strong class="text-black">Ancho de Banda</strong> es la capacidad teórica máxima de un enlace (ej. 1 Gbps). El <strong class="text-black">Throughput</strong> es la velocidad *real* que obtienes. El throughput siempre está limitado por el enlace más lento de la ruta, el **"cuello de botella" (bottleneck link)**.</p>
                </div>
            </div>
        </section>

        <section id="protocolos" class="mb-24">
            <h2 class="text-3xl font-bold text-center text-stone-800 mb-12">Arquitectura de Protocolos y Encapsulación</h2>
            <div class="grid lg:grid-cols-2 gap-8 items-start">
                <div class="bg-white p-8 rounded-lg shadow-lg">
                    <h3 class="text-2xl font-bold text-center mb-6">Pila de Protocolos TCP/IP</h3>
                    <div class="space-y-3" id="layers-container">
                        <!-- Layers will be injected here -->
                    </div>
                </div>
                 <div class="bg-white p-8 rounded-lg shadow-lg">
                    <h3 class="text-2xl font-bold text-center mb-6">Simulador de Encapsulación</h3>
                    <p class="text-stone-600 text-center mb-4">Pulsa para ver cómo se construye una Trama Ethernet.</p>
                    <div class="font-mono text-sm space-y-2 p-4 border rounded-md bg-stone-50 min-h-[220px]">
                        <div id="part-trama" class="packet-part flex items-center">
                            <span class="bg-purple-600 text-white font-bold p-2 rounded-l-md">H_Enlace</span>
                            <div class="border p-2 rounded-r-md bg-white w-full">...</div>
                        </div>
                        <div id="part-datagrama" class="packet-part flex items-center ml-4">
                            <span class="bg-red-600 text-white font-bold p-2 rounded-l-md">H_Red</span>
                            <div class="border p-2 rounded-r-md bg-white w-full">...</div>
                        </div>
                        <div id="part-segmento" class="packet-part flex items-center ml-8">
                            <span class="bg-green-600 text-white font-bold p-2 rounded-l-md">H_Transporte</span>
                             <div class="border p-2 rounded-r-md bg-white w-full">...</div>
                        </div>
                         <div id="part-mensaje" class="packet-part flex items-center ml-12">
                            <span class="bg-blue-600 text-white font-bold p-2 rounded-md w-full text-center">Mensaje ("23")</span>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <button id="encapsulate-btn" class="bg-teal-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-teal-700 transition">Encapsular</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="laboratorio" class="pt-12">
            <div class="bg-gray-800 text-white p-6 sm:p-8 rounded-lg shadow-2xl border-t-4 border-yellow-400">
                <h2 class="text-3xl font-bold text-center text-yellow-400 mb-2 font-mono">Simulador Táctico :: PEC1</h2>
                <p class="text-center text-stone-300 mb-10">Valida tu inteligencia. Cada módulo corresponde a un ejercicio clave.</p>
                <div id="lab-container" class="space-y-10">
                    <!-- Módulos de entrenamiento se cargarán aquí -->
                </div>
            </div>
        </section>

    </main>
    
    <footer class="bg-stone-200 mt-20">
        <div class="container mx-auto px-6 py-4 text-center text-stone-600">
            <p class="text-xs">&copy; 2025 Centro de Mando de Redes. Inteligencia extraída de los recursos del Reto 1.</p>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

    // --- Scrollspy Logic ---
    const navLinks = document.querySelectorAll('.nav-link, #mobile-menu a');
    const sections = document.querySelectorAll('main section');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').substring(1) === entry.target.id) {
                        link.classList.add('active');
                    }
                });
            }
        });
    }, { threshold: 0.5 });
    sections.forEach(section => observer.observe(section));

    // --- Performance Section: Delay Cards ---
    const delayData = [
        { title: 'Procesamiento', id: 'd_proc', color: 'sky-500', text: 'Tiempo que tarda un router en examinar la cabecera del paquete para decidir a dónde enviarlo. (Microsegundos)' },
        { title: 'Cola', id: 'd_queue', color: 'red-500', text: 'Tiempo que un paquete espera en el buffer de salida antes de ser transmitido. Depende de la congestión.' },
        { title: 'Transmisión', id: 'd_trans', color: 'yellow-500', text: 'Tiempo para "empujar" todos los bits del paquete al enlace. <strong>L/R</strong> (Tamaño / Ancho de Banda).' },
        { title: 'Propagación', id: 'd_prop', color: 'green-500', text: 'Tiempo que tarda un bit en viajar físicamente por el medio. <strong>d/s</strong> (Distancia / Velocidad).' }
    ];
    const performanceGrid = document.querySelector('#performance .grid');
    delayData.forEach(d => {
        performanceGrid.innerHTML += `
            <div class="text-center border-t-4 border-${d.color} pt-4 bg-white p-4 rounded-b-lg shadow-sm">
                <h4 class="font-bold text-lg">${d.title} (<span class="font-mono">${d.id}</span>)</h4>
                <p class="text-sm text-stone-600 mt-2">${d.text}</p>
            </div>
        `;
    });

    // --- Protocols Section: Layers and Encapsulation ---
    const layersData = [
        { name: "Aplicación", color: "sky-600", protocols: "HTTP, DNS, SMTP" },
        { name: "Transporte", color: "teal-600", protocols: "TCP, UDP" },
        { name: "Internet", color: "emerald-600", protocols: "IP, RIP, OSPF" },
        { name: "Acceso a la Red", color: "rose-700", protocols: "Ethernet, WiFi" }
    ];
    const layersContainer = document.getElementById('layers-container');
    layersData.forEach(l => {
        layersContainer.innerHTML += `
            <div class="layer bg-${l.color} text-white p-4 rounded-md text-center shadow-md">
                <div class="font-bold text-lg">${l.name}</div>
                <div class="text-sm opacity-80">${l.protocols}</div>
            </div>
        `;
    });
    
    const encapsulateBtn = document.getElementById('encapsulate-btn');
    const packetParts = document.querySelectorAll('.packet-part');
    encapsulateBtn.addEventListener('click', () => {
        packetParts.forEach(part => {
            part.style.opacity = 0;
            part.style.transform = 'translateX(-20px)';
        });
        let delay = 100;
        const partsOrder = ['part-mensaje', 'part-segmento', 'part-datagrama', 'part-trama'];
        partsOrder.forEach(id => {
            setTimeout(() => {
                const el = document.getElementById(id);
                el.style.opacity = 1;
                el.style.transform = 'translateX(0)';
            }, delay);
            delay += 300;
        });
    });


    // --- LABORATORY LOGIC ---
    const labContainer = document.getElementById('lab-container');
    const labModules = [
        {
            title: "Ej. 1: Genética de Internet",
            intel: "ARPANET fue diseñada para ser una red **descentralizada** y tolerante a fallos. Esta es su herencia más crítica.",
            question: "¿Qué característica de ARPANET fue fundamental para la resiliencia de Internet?",
            options: ["Su alta velocidad inicial", "Su naturaleza descentralizada", "Su uso exclusivo por universidades"],
            correct: 1,
            feedback: "Correcto. La descentralización, sin un punto único de fallo, permite que la red siga funcionando aunque partes de ella caigan."
        },
        {
            title: "Ej. 3: El Viaje del Paquete",
            intel: "Cada capa añade información de direccionamiento: **Capa Enlace (MAC)** para el siguiente salto, **Capa Red (IP)** para el destino final, **Capa Transporte (Puerto)** para la aplicación correcta.",
            question: "¿Qué dirección permanece constante durante todo el viaje de un paquete desde el origen al destino final?",
            options: ["Dirección MAC de Destino", "Dirección IP de Destino", "Número de Puerto de Origen"],
            correct: 1,
            feedback: "Exacto. Mientras la MAC cambia en cada salto (router), la dirección IP de destino es la 'dirección postal' final que no se altera."
        },
        {
            title: "Ej. 5: El Dilema del WiFi",
            intel: "La banda de 5 GHz sufre más atenuación (menor alcance) que la de 2.4 GHz, pero ofrece más canales, menos interferencia y mayor ancho de banda.",
            question: "Para una sesión de gaming online que requiere baja latencia y alta velocidad, ¿qué banda es preferible si estás cerca del router?",
            options: ["2.4 GHz por su estabilidad", "5 GHz por su velocidad y menor interferencia", "Cualquiera, no hay diferencia"],
            correct: 1,
            feedback: "Correcto. A corta distancia, 5 GHz es superior para tareas intensivas gracias a sus canales 'limpios' y mayor ancho de banda."
        },
         {
            title: "Ej. 12: La Identidad del Paquete",
            intel: "En modo simulación de Packet Tracer, al seguir un ping, verás que las direcciones MAC cambian en cada salto entre routers, pero las direcciones IP de origen y destino se mantienen.",
            question: "Un router recibe una trama. ¿Qué dirección mira para decidir por qué interfaz reenviar el paquete hacia su destino final?",
            options: ["La Dirección MAC de destino", "La Dirección IP de destino", "La Dirección IP de origen"],
            correct: 1,
            feedback: "Correcto. El router desencapsula la trama para ver el datagrama IP, mira la IP de destino, consulta su tabla de enrutamiento y decide el siguiente salto. Luego vuelve a encapsularlo en una nueva trama con nuevas MACs."
        }
    ];

    labModules.forEach((mod, index) => {
        const moduleEl = document.createElement('div');
        moduleEl.className = 'bg-black/40 p-6 rounded-lg border border-stone-600';
        moduleEl.innerHTML = `
            <h3 class="text-xl font-bold mb-4 border-b border-yellow-400/50 pb-2">${mod.title}</h3>
            <div class="bg-gray-900 border-l-4 border-sky-500 p-4 mb-6 rounded-r-md">
                <h4 class="font-bold text-sky-400 font-mono text-sm">&gt; INTEL DROP</h4>
                <p class="text-stone-300 text-sm mt-2">${mod.intel}</p>
            </div>
            <p class="font-semibold mb-4 text-stone-200">${mod.question}</p>
            <div class="grid grid-cols-1 sm:grid-cols-${mod.options.length} gap-4" id="q-container-${index}">
                ${mod.options.map((opt, i) => `<button data-index="${i}" class="lab-option w-full text-center px-4 py-3 border-2 border-stone-500 rounded-lg font-semibold hover:bg-stone-700 text-stone-200 hover:text-white">${opt}</button>`).join('')}
            </div>
            <div id="feedback-${index}" class="mt-4 p-4 rounded-md text-center font-semibold hidden feedback-box opacity-0"></div>
        `;
        labContainer.appendChild(moduleEl);

        const qContainer = document.getElementById(`q-container-${index}`);
        qContainer.addEventListener('click', e => {
            const target = e.target.closest('.lab-option');
            if (target && !target.disabled) {
                const selectedIndex = parseInt(target.dataset.index);
                const isCorrect = selectedIndex === mod.correct;
                const feedbackEl = document.getElementById(`feedback-${index}`);
                
                feedbackEl.textContent = mod.feedback;
                feedbackEl.className = `mt-4 p-4 rounded-md text-center font-semibold feedback-box ${isCorrect ? 'bg-green-600/80 text-white' : 'bg-red-600/80 text-white'}`;
                feedbackEl.classList.remove('hidden');
                setTimeout(() => feedbackEl.style.opacity = '1', 10);

                qContainer.querySelectorAll('.lab-option').forEach((btn, i) => {
                    btn.disabled = true;
                    if (i === mod.correct) btn.classList.add('correct');
                    else if (i === selectedIndex) btn.classList.add('incorrect');
                });
            }
        });
    });
});
</script>
</body>
</html>
